{% extends "base.html" %}

{% block title %}音声アップロードと文字起こし{% endblock %}

{% block content %}
  {% if text %}
    <h2>文字起こし結果</h2>
    <p>{{ text }}</p>

    <h3>アップロードした音声を再生:</h3>
    <audio controls>
      <source src="{{ url_for('whisper.uploaded_file', filename=filename) }}" type="audio/mpeg">
      ブラウザが audio タグをサポートしていません。
    </audio>

    <p><a href="{{ url_for('whisper.upload_audio') }}">もう一度アップロード</a></p>
  {% endif %}

  <h2>音声ファイルをアップロード</h2>
  <form method="POST" enctype="multipart/form-data">
    <input type="file" name="file" accept="audio/*" required>
    <button type="submit">アップロード</button>
  </form>
{% endblock %}
